000100161107CREATE or replace PROCEDURE bbiweb.st_Dept  (IN store int)
000200160511result sets 1
000300160511LANGUAGE SQL
000400160511BEGIN
000500170602/* Store number has been passed */
000600160511DECLARE c1 CURSOR with return FOR
000700170726select
000800170728   a.R09ADT,
000900170728   a.R07DSC
001000170728  from glcust.glvrdpstr a
001100170728 where a.s99co = 1
001200170728   and a.s99loc = STORE
001300170728 order by 2  ;
001400170726
001500170602/* Store number has NOT been passed */
001600170602DECLARE c2 CURSOR with return FOR
001700170728select
001800170728   a.R09ADT,
001900170728   a.R07DSC
002000170728  from glcust.glvrdp a
002100170728 where a.s99co = 1
002200170728 order by 2  ;
002300170602
002400170602 CASE STORE
002500170602 WHEN 0
002600170602 THEN
002700170602    OPEN c2;
002800170602 ELSE
002900170602   OPEN C1;
003000170602 END CASE ;
003100160511End
003200160511
