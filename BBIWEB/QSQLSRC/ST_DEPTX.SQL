000100161107CREATE or replace PROCEDURE bbiweb.st_Dept  (IN store int)
000200160511result sets 1
000300160511LANGUAGE SQL
000400160511BEGIN
000500160511DECLARE c1 CURSOR with return FOR
000600161007SELECT DISTINCT  DECIMAL(R09ADT * 10,5,0) AS R09ADT,
000700161007TRIM(R07DSC) AS R07DSC
000800161007FROM GLCUST.BRP090 , GLCUST.BRP070
000900161007WHERE R09CO = R07CO AND  R09ADT = R07DPT
001000161007AND   R09DPT BETWEEN 2 AND 17
001100161007AND R09STR = STORE AND R07CO = 1 AND R07X1 <> 'S'
001200161007UNION
001300161007
001400161007 SELECT DISTINCT  DECIMAL(R09ADT * 10 + 1,5,0) AS R09ADT,
001500161007TRIM(R07DSC) || ' SUPPLIES' AS R07DSC
001600161007FROM GLCUST.BRP090 , GLCUST.BRP070
001700161007WHERE R09CO = R07CO AND  R09ADT = R07DPT
001800161007AND   R09DPT BETWEEN 2 AND 17
001900161007AND R09STR = STORE AND R07CO = 1 AND R07X1 <> 'S'
002000161007ORDER BY 2           ;
002100160511
002200160511OPEN c1;
002300160511End
002400160511
