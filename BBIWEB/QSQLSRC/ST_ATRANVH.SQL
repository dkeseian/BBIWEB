000100161107CREATE OR REPLACE PROCEDURE BBIWEB.ST_ATRANVH  (IN STORE INT)
000200160613 RESULT SETS 1
000300160613 LANGUAGE SQL
000400160613 BEGIN
000500160613  DECLARE C1 CURSOR WITH RETURN FOR
000600160613  SELECT TO_CHAR(CREATEDTE, 'YYYY-MM-DD HH24:MI:SS')AS CHARCRTDTE , TO_CHAR(CHANGEDTE,
000700160613  'YYYY-MM-DD HH24:MI:SS')AS CHARCHGDTE,
000800160613  TO_CHAR(APPRVEDTE, 'YYYY-MM-DD HH24:MI:SS')AS CHARAPPDTE,
000900160613  TO_CHAR(POSTEDDTE, 'YYYY-MM-DD HH24:MI:SS')AS CHARPSTDTE,
001000160815  TO_CHAR(REVEIVDTE, 'YYYY-MM-DD HH24:MI:SS')AS CHARRCVDTE,
001100160613  A.*
001200160613
001300160622 FROM BBIWEB.BBV170AH A
001400160613 WHERE APPRVEFLG = ' '
001500160613 ORDER BY FROMSTORE;
001600160620
001700160613 DECLARE C2 CURSOR WITH RETURN FOR
001800160613 SELECT TO_CHAR(CREATEDTE, 'YYYY-MM-DD HH24:MI:SS')AS CHARCRTDTE , TO_CHAR(CHANGEDTE,
001900160613  'YYYY-MM-DD HH24:MI:SS')AS CHARCHGDTE,
002000160613  TO_CHAR(APPRVEDTE, 'YYYY-MM-DD HH24:MI:SS')AS CHARAPPDTE,
002100160613  TO_CHAR(POSTEDDTE, 'YYYY-MM-DD HH24:MI:SS')AS CHARPSTDTE,
002200160815  TO_CHAR(REVEIVDTE, 'YYYY-MM-DD HH24:MI:SS')AS CHARRCVDTE,
002300160613  B.*
002400160613
002500160622 FROM BBIWEB.BBV170AH B
002600160613 WHERE FROMSTORE = STORE AND APPRVEFLG = ' '
002700160613 ORDER BY FROMSTORE;
002800160613 CASE STORE
002900160613 WHEN -999
003000160613 THEN
003100160613    OPEN C1;
003200160613 ELSE
003300160613   OPEN C2;
003400160613 END CASE ;
003500160613 END
